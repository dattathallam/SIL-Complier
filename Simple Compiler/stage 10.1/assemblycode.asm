ALLOC:
PUSH BP
MOV BP, SP
MOV R0, [256]
MOV R1, [R0]
MOV [256], R1
MOV R1, BP
MOV R2, 2
SUB R1, R2
MOV [R1], R0
MOV BP, [SP]
POP R0
RET
FREE:
PUSH BP
MOV BP, SP
MOV R0, 2
MOV R1, BP
SUB R1, R0
MOV R0, [R1]
MOV R1, [256]
MOV [256], R0
MOV [R0], R1
MOV BP, [SP]
POP R0
RET
START
MOV [0], 16
MOV [16], 32
MOV [32], 48
MOV [48], 64
MOV [64], 80
MOV [80], 96
MOV [96], 112
MOV [112], 128
MOV [128], 144
MOV [144], 160
MOV [160], 176
MOV [176], 192
MOV [192], 208
MOV [208], 224
MOV [224], 240
MOV [256], 0
MOV SP,257
MOV BP,258
PUSH R0
CALL MAIN
HALT
